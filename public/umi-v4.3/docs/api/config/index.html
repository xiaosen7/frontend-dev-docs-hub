<!DOCTYPE html><html><head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta property="og:image" content="https://umijs.org/images/og-home.png">
<meta property="og:url" content="https://umijs.org/">
<meta property="og:type" content="article">
<meta property="og:site_name" content="Umi">
<meta property="og:description" content="Umi是可扩展的企业级前端应用框架。Umi 以路由为基础的，同时支持配置式路由和约定式路由，保证路由的功能完备，并以此进行功能扩展。然后配以生命周期完善的插件体系，覆盖从源码到构建产物的每个生命周期，支持各种功能扩展和业务需求。">
<meta property="twitter:image" content="https://umijs.org/images/og-home.png">
<meta property="twitter:site" content="https://umijs.org/">
<meta property="twitter:creator" content="Umi">
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:title" content="Umi">
<meta property="twitter:description" content="Umi是可扩展的企业级前端应用框架。Umi 以路由为基础的，同时支持配置式路由和约定式路由，保证路由的功能完备，并以此进行功能扩展。然后配以生命周期完善的插件体系，覆盖从源码到构建产物的每个生命周期，支持各种功能扩展和业务需求。">
<meta property="fb:app_id" content="922985738798968">
<link rel="shortcut icon" href="https://img.alicdn.com/tfs/TB1YHEpwUT1gK0jSZFhXXaAtVXa-28-27.svg">
<link rel="stylesheet" href="/umi.c9f82ed3.css">
<title data-rh="true">配置</title>
<meta data-rh="true" property="og:title" content="配置"/><meta data-rh="true" name="description" content="对于 umi 中能使用的自定义配置，你可以使用项目根目录的 .umirc.ts 文件或者 config/config.ts，值得注意的是这两个文件功能一致，仅仅是存在目录不同，2 选 1 ，.umirc.ts 文件优先级较高。"/><meta data-rh="true" property="og:description" content="对于 umi 中能使用的自定义配置，你可以使用项目根目录的 .umirc.ts 文件或者 config/config.ts，值得注意的是这两个文件功能一致，仅仅是存在目录不同，2 选 1 ，.umirc.ts 文件优先级较高。"/>
<link data-rh="true" rel="canonical" href="https://umijs.org//docs/api/config"/>
</head>
<body>
<noscript><b>Enable JavaScript to run this app.</b></noscript><div id="root"><!--$?--><template id="B:0"></template><div></div><!--/$--></div><script>window.__UMI_LOADER_DATA__ = {}</script>
<script async="" src="/umi.0bdf4102.js"></script>

</body></html><div hidden id="S:0"><!--$?--><template id="B:1"></template><div></div><!--/$--></div><script>function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("B:0","S:0")</script><div hidden id="S:1"><div class="dumi-default-doc-layout"><div class="dumi-default-header"><div class="dumi-default-header-content"><section class="dumi-default-header-left"><a class="dumi-default-logo" href="/"><img src="https://gw.alipayobjects.com/zos/bmw-prod/598d14af-4f1c-497d-b579-5ac42cd4dd1f/k7bjua9c_w132_h130.png" alt="UmiJS"/>UmiJS<!-- --></a></section><section class="dumi-default-header-right"><ul class="dumi-default-navbar"><li><a href="/docs/introduce/introduce">介绍</a></li><li><a href="/docs/guides/getting-started">指南</a></li><li><a class="active" href="/docs/api/api">API</a></li><li><a href="/docs/max/introduce">Umi Max</a></li><li><a href="/blog/umi-4-rc">博客</a></li></ul><div class="dumi-default-header-right-aside"><div class="dumi-default-search-bar"><svg viewBox="64 64 896 896" class="dumi-default-search-bar-svg"><path d="M909.6 854.5 649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"></path></svg><input class="dumi-default-search-bar-input" placeholder="输入关键字搜索..."/><span class="dumi-default-search-shortcut">⌘<!-- --> K<!-- --></span></div><a class="dumi-default-lang-switch" href="/en-US/docs/api/config">EN</a><span class="dumi-default-color-switch" data-dumi-tooltip="亮色模式" data-dumi-tooltip-bottom="true"><svg viewBox="0 0 16 16"><path d="M8 13a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0v-1a1 1 0 0 1 1-1ZM8 3a1 1 0 0 1-1-1V1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1Zm7 4a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1ZM3 8a1 1 0 0 1-1 1H1a1 1 0 1 1 0-2h1a1 1 0 0 1 1 1Zm9.95 3.536.707.707a1 1 0 0 1-1.414 1.414l-.707-.707a1 1 0 0 1 1.414-1.414Zm-9.9-7.072-.707-.707a1 1 0 0 1 1.414-1.414l.707.707A1 1 0 0 1 3.05 4.464Zm9.9 0a1 1 0 0 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 1.414l-.707.707Zm-9.9 7.072a1 1 0 0 1 1.414 1.414l-.707.707a1 1 0 0 1-1.414-1.414l.707-.707ZM8 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm0 6.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5Z"></path></svg><select><option value="light" selected="">亮色模式<!-- --></option><option value="dark">暗色模式<!-- --></option><option value="auto">跟随系统<!-- --></option></select></span><a class="dumi-default-icon" data-dumi-tooltip="GitHub" data-dumi-tooltip-bottom="true" target="_blank" href="https://github.com/umijs/umi" rel="noreferrer"><svg viewBox="64 64 896 896"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></a><div class="dumi-default-lang-select" style="border-inline-start:1px solid #d0d5d8;margin-inline-start:15px;padding-inline-start:5px"><select style="padding-top:1px;padding-bottom:1px"><option value="4.3.31" selected="">4.3.31<!-- --></option><option value="3.x">3.x<!-- --></option></select><svg viewBox="64 64 896 896"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></div></div></section><button type="button" class="dumi-default-header-menu-btn"><svg viewBox="64 64 896 896"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></button></div></div><div class="dumi-default-doc-layout-mobile-bar"><button type="button" class="dumi-default-sidebar-btn"><svg viewBox="64 64 896 896"><path d="M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm0 424h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm784 140H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0-424H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"></path></svg>侧边菜单<!-- --></button></div><main><div class="dumi-default-sidebar"><dl class="dumi-default-sidebar-group"><dd><a title="API" class="" href="/docs/api/api">API</a></dd><dd><a title="配置" aria-current="page" class="active" href="/docs/api/config">配置</a></dd><dd><a title="运行时配置" class="" href="/docs/api/runtime-config">运行时配置</a></dd><dd><a title="命令行" class="" href="/docs/api/commands">命令行</a></dd><dd><a title="插件 API" class="" href="/docs/api/plugin-api">插件 API</a></dd></dl></div><div class="dumi-default-content"><article><!--$?--><template id="B:2"></template><div></div><!--/$--></article><footer class="dumi-default-content-footer"><dl><dd><svg viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M686.7 638.6 544.1 535.5V288c0-4.4-3.6-8-8-8H488c-4.4 0-8 3.6-8 8v275.4c0 2.6 1.2 5 3.3 6.5l165.4 120.6c3.6 2.6 8.6 1.8 11.2-1.7l28.6-39c2.6-3.7 1.8-8.7-1.8-11.2z"></path></svg>最后更新时间：<!-- --><time dateTime=""></time></dd></dl><nav></nav></footer><div class="dumi-default-footer">Open-source MIT Licensed | Copyright © 2017-present</div></div><div class="dumi-default-doc-layout-toc-wrapper"><h4>TABLE OF CONTENTS</h4></div></main></div></div><script>$RC("B:1","S:1")</script><div hidden id="S:2"><div class="markdown"><h1 id="配置"><a aria-hidden="true" tabindex="-1" href="#配置"><span class="icon icon-link"></span></a>配置<!-- --></h1><p>对于 umi 中能使用的自定义配置，你可以使用项目根目录的 <!-- --><code>.umirc.ts</code> 文件或者 <!-- --><code>config/config.ts</code>，值得注意的是这两个文件功能一致，仅仅是存在目录不同，2 选 1 ，<!-- --><code>.umirc.ts</code> 文件优先级较高。<!-- --></p><blockquote><p>更多目录相关信息介绍，你可以在<!-- --><a href="/docs/guides/directory-structure">目录结构</a>了解。<!-- --></p></blockquote><p>umi 的配置文件是一个正常的 node 模块，它在执行 umi <!-- --><a href="/docs/api/commands">命令行</a>的时候使用，并且不包含在浏览器端构建中。<!-- --></p><blockquote><p>关于浏览器端构建需要用到的一些配置，还有一些在样式表现上产生作用的一些配置，在 umi 中被统一称为“运行时配置”，你可以在<!-- --><a href="/docs/api/runtime-config">运行时配置</a>看到更多关于它的说明。<!-- --></p></blockquote><p>这里有一个最简单的 umi 配置文件的范例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> defineConfig </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  outputPath</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;dist&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></div></pre></div><p>使用 <!-- --><code>defineConfig</code> 包裹配置是为了在书写配置文件的时候，能得到更好的拼写联想支持。如果你不需要，直接 <!-- --><code>export default {}</code> 也可以。<!-- --></p><p>值得关注的是在你使用 umi 的时候，你不需要了解每一个配置的作用。你可以大致的浏览一下以下 umi 支持的所有配置，然后在你需要的时候，再回来查看如何启用和修改你需要的内容。</p><blockquote><p>为方便查找，以下配置项通过字母排序。</p></blockquote><h2 id="alias"><a aria-hidden="true" tabindex="-1" href="#alias"><span class="icon icon-link"></span></a>alias<!-- --></h2><ul><li>类型：<!-- --><code>Record&lt;string, string&gt;</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>配置别名，对 import 语句的 source 做映射。</p><p>比如：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">alias</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/tmp/to/foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>然后代码里 <!-- --><code>import &#x27;foo&#x27;</code> 实际上会 <!-- --><code>import &#x27;/tmp/to/foo&#x27;</code>。<!-- --></p><p>有几个 Tip。</p><p>1、alias 的值最好用绝对路径，尤其是指向依赖时，记得加 <!-- --><code>require.resolve</code>，比如，<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// ⛔</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">alias</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token comment">// ✅</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">alias</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token plain"> require</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>2、如果不需要子路径也被映射，记得加 <!-- --><code>$</code> 后缀，比如<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// import &#x27;foo/bar&#x27; 会被映射到 import &#x27;/tmp/to/foo/bar&#x27;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">alias</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">foo</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/tmp/to/foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token comment">// import &#x27;foo/bar&#x27; 还是 import &#x27;foo/bar&#x27;，不会被修改</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">alias</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">foo$</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/tmp/to/foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="autoprefixer"><a aria-hidden="true" tabindex="-1" href="#autoprefixer"><span class="icon icon-link"></span></a>autoprefixer<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{ flexbox: &#x27;no-2009&#x27; }</code></li></ul><p>用于解析 CSS 并使用来自 Can I Use 的值将供应商前缀添加到 CSS 规则。如自动给 CSS 添加 <!-- --><code>-webkit-</code> 前缀。<!-- --></p><p>更多配置，请查阅 <!-- --><a href="https://github.com/postcss/autoprefixer#options">autoprefixer 的配置项</a>。<!-- --></p><h2 id="analyze"><a aria-hidden="true" tabindex="-1" href="#analyze"><span class="icon icon-link"></span></a>analyze<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>通过指定 <!-- --><a href="/docs/guides/env-variables#analyze"><code>ANALYZE</code></a> 环境变量分析产物构成时，analyzer 插件的具体配置项，见 <!-- --><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer#options-for-plugin">webpack-bundle-analyzer</a></p><p>使用 Vite 模式时，除了可以自定义 <!-- --><a href="https://github.com/btd/rollup-plugin-visualizer">rollup-plugin-visualizer</a> 的配置， <!-- --><code>excludeAssets</code>、<!-- --><code>generateStatsFile</code>、<!-- --><code>openAnalyzer</code>、<!-- --><code>reportFilename</code>、<!-- --><code>reportTitle</code> 这些选项会自动转换适配。<!-- --></p><h2 id="base"><a aria-hidden="true" tabindex="-1" href="#base"><span class="icon icon-link"></span></a>base<!-- --></h2><ul><li>类型：<!-- --><code>string</code></li><li>默认值：<!-- --><code>/</code></li></ul><p>要在非根目录下部署 umi 项目时，你可以使用 base 配置。</p><p>base 配置允许你为应用程序设置路由前缀。比如有路由 <!-- --><code>/</code> 和 <!-- --><code>/users</code>，设置 base 为 <!-- --><code>/foo/</code>  后就可通过 <!-- --><code>/foo/</code> 和 <!-- --><code>/foo/users</code> 访问到之前的路由。<!-- --></p><blockquote><p>注意：base 配置必须在构建时设置，并且不能在不重新构建的情况下更改，因为该值内联在客户端包中。</p></blockquote><h2 id="cachedirectorypath"><a aria-hidden="true" tabindex="-1" href="#cachedirectorypath"><span class="icon icon-link"></span></a>cacheDirectoryPath<!-- --></h2><ul><li>类型：<!-- --><code>string</code></li><li>默认值：<!-- --><code>node_modules/.cache</code></li></ul><p>默认情况下 Umi 会将构建中的一些缓存文件存放在 <!-- --><code>node_modules/.cache</code> 目录下，比如 logger 日志，webpack 缓存，mfsu 缓存等。你可以通过使用 <!-- --><code>cacheDirectoryPath</code> 配置来修改 Umi 的缓存文件目录。<!-- --></p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// 更改缓存文件路径到 node_modules/.cache1 文件夹</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">cacheDirectoryPath</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;node_modules/.cache1&#x27;</span><span class="token punctuation">,</span></div></div></pre></div><h2 id="chainwebpack"><a aria-hidden="true" tabindex="-1" href="#chainwebpack"><span class="icon icon-link"></span></a>chainWebpack<!-- --></h2><ul><li>类型：<!-- --><code>(memo, args) =&gt; void</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>为了扩展 Umi 内置的 webpack 配置，我们提供了用链式编程的方式修改 webpack 配置，基于 webpack-chain，具体 API 可参考 <!-- --><a href="https://github.com/mozilla-neutrino/webpack-chain">webpack-api 的文档</a>。<!-- --></p><p>如下所示：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">memo</span><span class="token parameter punctuation">,</span><span class="token parameter"> args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> memo</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></pre></div><p>该函数具有两个参数：</p><ul><li><code>memo</code> 是现有 webpack 配置<!-- --></li><li><code>args</code> 包含一些额外信息和辅助对象，目前有 <!-- --><code>env</code> 和 <!-- --><code>webpack</code>。<!-- --><code>env</code> 为当前环境，值为 <!-- --><code>development</code> 或 <!-- --><code>production</code>；<!-- --><code>webpack</code> 为 webpack 对象，可从中获取 webpack 内置插件等<!-- --></li></ul><p>用法示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">memo</span><span class="token parameter punctuation">,</span><span class="token parameter"> </span><span class="token parameter punctuation">{</span><span class="token parameter"> env</span><span class="token parameter punctuation">,</span><span class="token parameter"> webpack </span><span class="token parameter punctuation">}</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 设置 alias</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token property-access">resolve</span><span class="token punctuation">.</span><span class="token property-access">alias</span><span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span><span class="token string">&#x27;foo&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;/tmp/to/foo&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 添加额外插件</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">&#x27;hello&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token maybe-class-name">Plugin</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token spread operator">...</span><span class="token plain">args</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 删除 Umi 内置插件</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token property-access">plugins</span><span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span><span class="token string">&#x27;hmr&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></pre></div><h2 id="clicktocomponent"><a aria-hidden="true" tabindex="-1" href="#clicktocomponent"><span class="icon icon-link"></span></a>clickToComponent<!-- --></h2><ul><li>类型: <!-- --><code>{ editor?: string }</code></li><li>默认值: <!-- --><code>false</code></li></ul><blockquote><p>当前仅 React 项目支持。</p></blockquote><p>开启后，可通过 <!-- --><code>Option+Click/Alt+Click</code> 点击组件跳转至编辑器源码位置，<!-- --><code>Option+Right-click/Alt+Right-click</code> 可以打开上下文，查看父组件。<!-- --></p><p>关于参数。<!-- --><code>editor</code> 为编辑器名称，默认为 &#x27;vscode&#x27;，支持 <!-- --><code>vscode</code> &amp; <!-- --><code>vscode-insiders</code>。<!-- --></p><p>配置 clickToComponent 的行为，详见 <!-- --><a href="https://github.com/ericclemmons/click-to-component">click-to-component</a>。<!-- --></p><p>示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token comment">// .umirc.ts</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  clickToComponent</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></pre></div><h2 id="clientloader"><a aria-hidden="true" tabindex="-1" href="#clientloader"><span class="icon icon-link"></span></a>clientLoader<!-- --></h2><ul><li>类型: <!-- --><code>{}</code></li><li>默认值: <!-- --><code>false</code></li></ul><p>开启后，可以为每个路由声明一个数据加载函数 <!-- --><code>clientLoader</code>，将页面需要的加载数据程序提取到 <!-- --><code>clientLoader</code> 可以让 Umi
提前在页面组件尚未加载好的时候提前进行数据的加载，避免瀑布流请求的问题，详细介绍请看 <!-- --><a href="/docs/guides/client-loader">路由数据预加载</a>。<!-- --></p><p>示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token comment">// .umirc.ts</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  clientLoader</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></pre></div><p>配置开启后，在路由组件中使用：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-jsx"><div class=""><div class=""><span class="token comment">// pages/.../some_page.tsx</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword module">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> useClientLoaderData </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword module">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">SomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> data </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">useClientLoaderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token tag punctuation">&lt;</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token punctuation">{</span><span class="token plain">data</span><span class="token punctuation">}</span><span class="token tag punctuation">&lt;/</span><span class="token tag">div</span><span class="token tag punctuation">&gt;</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">clientLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> data </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;/api/data&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> data</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="codesplitting"><a aria-hidden="true" tabindex="-1" href="#codesplitting"><span class="icon icon-link"></span></a>codeSplitting<!-- --></h2><ul><li>类型：<!-- --><code>{ jsStrategy: &#x27;bigVendors&#x27; | &#x27;depPerChunk&#x27; | &#x27;granularChunks&#x27;; jsStrategyOptions: {} }</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>用于配置 code splitting 的策略方案，Umi 默认以路由为分界拆分 chunk，实现路由维度的 chunk 按需加载，如果在此之上希望继续提取公共 chunk，可以选择合适的策略进行配置，差异如下。</p><p>bigVendors 是大 vendors 方案，会将 async chunk 里的 node_modules 下的文件打包到一起，可以避免重复。同时缺点是，1）单文件的尺寸过大，2）毫无缓存效率可言。</p><p>depPerChunk 和 bigVendors 类似，不同的是把依赖按 package name + version 进行拆分，算是解了 bigVendors 的尺寸和缓存效率问题。但同时带来的潜在问题是，可能导致请求较多。我的理解是，对于非大型项目来说其实还好，因为，1）单个页面的请求不会包含非常多的依赖，2）基于 HTTP/2，几十个请求不算问题。但是，对于大型项目或巨型项目来说，需要考虑更合适的方案。</p><p>granularChunks 在 bigVendors 和 depPerChunk 之间取了中间值，同时又能在缓存效率上有更好的利用。无特殊场景，建议用 granularChunks 策略。</p><h2 id="conventionlayout"><a aria-hidden="true" tabindex="-1" href="#conventionlayout"><span class="icon icon-link"></span></a>conventionLayout<!-- --></h2><ul><li>类型：<!-- --><code>boolean</code></li><li>默认值：<!-- --><code>undefined</code></li></ul><p><code>src/layouts/index.[tsx|vue|jsx|js]</code> 为约定式布局，默认开启。可通过配置 <!-- --><code>conventionLayout: false</code> 关闭该默认行为。<!-- --></p><h2 id="conventionroutes"><a aria-hidden="true" tabindex="-1" href="#conventionroutes"><span class="icon icon-link"></span></a>conventionRoutes<!-- --></h2><ul><li>类型：<!-- --><code>{ base: string; exclude: RegExp[] }</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>修改默认的约定式路由规则，仅在使用 umi 约定式路由时有效，约定式路由也叫文件路由，就是不需要手写配置，文件系统即路由，通过目录和文件及其命名分析出路由配置。</p><p>使用约定式路由时，约定 <!-- --><code>src/pages</code> 下所有的 <!-- --><code>(j|t)sx?</code> 文件即路由。<!-- --></p><blockquote><p>你可以从<!-- --><a href="/docs/guides/routes#%E7%BA%A6%E5%AE%9A%E5%BC%8F%E8%B7%AF%E7%94%B1">约定式路由</a>查看更多说明。<!-- --></p></blockquote><h3 id="base-1"><a aria-hidden="true" tabindex="-1" href="#base-1"><span class="icon icon-link"></span></a>base<!-- --></h3><p><code>base</code> 用于设置约定的路由的基础路径，默认从 <!-- --><code>src/pages</code> 读取，如果是文档站点可能会需要将其改成 <!-- --><code>./docs</code>；<!-- --></p><h3 id="exclude"><a aria-hidden="true" tabindex="-1" href="#exclude"><span class="icon icon-link"></span></a>exclude<!-- --></h3><p>你可以使用 <!-- --><code>exclude</code> 配置过滤一些不需要的文件，比如用于过滤 components、models 等。<!-- --></p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// 不识别 components 和 models 目录下的文件为路由</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">conventionRoutes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\/components\/</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\/models\/</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="copy"><a aria-hidden="true" tabindex="-1" href="#copy"><span class="icon icon-link"></span></a>copy<!-- --></h2><ul><li>类型：<!-- --><code>Array&lt;string | { from: string; to: string; }&gt;</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置要复制到输出目录的文件或文件夹。</p><p>当配置字符串时，默认拷贝到产物目录，如：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">copy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;foo.json&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;src/bar.json&#x27;</span><span class="token punctuation">]</span></div></div></pre></div><p>会产生如下产物的结构：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">+ dist</span></div></div><div class=""><div class=""><span class="token plain">  - bar.json</span></div></div><div class=""><div class=""><span class="token plain">  - foo.json</span></div></div><div class=""><div class=""><span class="token plain">+ src</span></div></div><div class=""><div class=""><span class="token plain">  - bar.json</span></div></div><div class=""><div class=""><span class="token plain">- foo.json</span></div></div></pre></div><p>你也可以通过对象配置具体的拷贝位置，其中相对路径的起点为项目根目录：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">copy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> from</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;from&#x27;</span><span class="token punctuation">,</span><span class="token plain"> to</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;dist/output&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> from</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;file.json&#x27;</span><span class="token punctuation">,</span><span class="token plain"> to</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;dist&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">]</span></div></div></pre></div><p>此时将产生如下产物结构：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">+ dist</span></div></div><div class=""><div class=""><span class="token plain">  + output</span></div></div><div class=""><div class=""><span class="token plain">    - foo.json</span></div></div><div class=""><div class=""><span class="token plain">  - file.json</span></div></div><div class=""><div class=""><span class="token plain">+ from</span></div></div><div class=""><div class=""><span class="token plain">  - foo.json</span></div></div><div class=""><div class=""><span class="token plain">- file.json</span></div></div></pre></div><h2 id="crossorigin"><a aria-hidden="true" tabindex="-1" href="#crossorigin"><span class="icon icon-link"></span></a>crossorigin<!-- --></h2><ul><li>类型：<!-- --><code>{ includes?: string[] }</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>配置 script 标签的 crossorigin。如果有声明，会为本地 script 加上 crossorigin=&quot;anonymous&quot; 的属性。</p><p>关于参数。<!-- --><code>includes</code> 参数可以为额外的非本地 script 标签加上此属性。<!-- --></p><p>比如：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">crossorigin: {}</span></div></div></pre></div><p>然后输出的 HTML 中会有这些变化，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-diff"><div class=""><div class=""><span class="token deleted-sign deleted prefix deleted">-</span><span class="token deleted-sign deleted line"></span></div></div><div class=""><div class=""><span class="token deleted-sign deleted line"></span><span class="token deleted-arrow deleted prefix deleted">&lt;</span><span class="token deleted-arrow deleted line">script src=&quot;/umi.js&quot;&gt;&lt;/script&gt;</span></div></div><div class=""><div class=""><span class="token deleted-arrow deleted line"></span><span class="token inserted-sign inserted prefix inserted">+</span><span class="token inserted-sign inserted line"></span></div></div><div class=""><div class=""><span class="token inserted-sign inserted line"></span><span class="token deleted-arrow deleted prefix deleted">&lt;</span><span class="token deleted-arrow deleted line">script src=&quot;/umi.js&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;</span></div></div></pre></div><h2 id="cssminifier"><a aria-hidden="true" tabindex="-1" href="#cssminifier"><span class="icon icon-link"></span></a>cssMinifier<!-- --></h2><ul><li>类型：<!-- --><code>string</code> 可选的值：<!-- --><code>esbuild</code>, <!-- --><code>cssnano</code>, <!-- --><code>parcelCSS</code>, <!-- --><code>none</code></li><li>默认值：<!-- --><code>esbuild</code></li></ul><p>配置构建时使用的 CSS 压缩工具; <!-- --><code>none</code> 表示不压缩。<!-- --></p><p>示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">cssMinifier</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;esbuild&#x27;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="cssminifieroptions"><a aria-hidden="true" tabindex="-1" href="#cssminifieroptions"><span class="icon icon-link"></span></a>cssMinifierOptions<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p><code>cssMinifier</code> CSS 压缩工具配置选项。<!-- --></p><p>示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">cssMinifier</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;esbuild&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">cssMinifierOptions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">minifyWhitespace</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">minifySyntax</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>对应 CSS 压缩的配置请查看对应的文档。</p><ul><li><a href="https://esbuild.github.io/api/#minify">esbuild 参考</a></li><li><a href="https://cssnano.co/docs/config-file/">cssnano 参考</a></li><li><a href="https://github.com/parcel-bundler/parcel-css/blob/master/node/index.d.ts">parcelCSS 参考</a></li></ul><h2 id="csspublicpath"><a aria-hidden="true" tabindex="-1" href="#csspublicpath"><span class="icon icon-link"></span></a>cssPublicPath<!-- --></h2><ul><li>类型：<!-- --><code>string</code></li><li>默认值：<!-- --><code>./</code></li></ul><p>为 CSS 中的图片、文件等外部资源指定自定义公共路径。作用类似于 <!-- --><code>publicPath</code> 默认值是 <!-- --><code>./</code>。<!-- --></p><h2 id="cssloader"><a aria-hidden="true" tabindex="-1" href="#cssloader"><span class="icon icon-link"></span></a>cssLoader<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>配置 css-loader ，详见 <!-- --><a href="https://github.com/webpack-contrib/css-loader#options">css-loader &gt; options</a></p><h2 id="cssloadermodules"><a aria-hidden="true" tabindex="-1" href="#cssloadermodules"><span class="icon icon-link"></span></a>cssLoaderModules<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>配置 css modules 的行为，详见 <!-- --><a href="https://github.com/webpack-contrib/css-loader#modules">css-loader &gt; modules</a>。<!-- --></p><p>如：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">cssLoaderModules</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// 配置驼峰式使用</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  exportLocalsConvention</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;camelCase&#x27;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="deadcode"><a aria-hidden="true" tabindex="-1" href="#deadcode"><span class="icon icon-link"></span></a>deadCode<!-- --></h2><ul><li>类型：<!-- --><code>{ patterns?: string[]; exclude?: string[]; failOnHint?: boolean; detectUnusedFiles?: boolean; detectUnusedExport?: boolean; context?: string }</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>检测未使用的文件和导出，仅在 build 阶段开启。</p><p>比如：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">deadCode: {}</span></div></div></pre></div><p>然后执行 build，如有发现问题，会打印警告：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">Warning: There are 1 unused files:</span></div></div><div class=""><div class=""><span class="token plain"> 1. /pages/index.module.less</span></div></div><div class=""><div class=""><span class="token plain"> Please be careful if you want to remove them (¬º-°)¬.</span></div></div></pre></div><p>可配置项：</p><ul><li><code>patterns</code> : 识别代码的范围，如 <!-- --><code>[&#x27;src/pages/**&#x27;]</code></li><li><code>exclude</code> : 排除检测的范围，如 <!-- --><code>[&#x27;src/pages/utils/**&#x27;]</code></li><li><code>failOnHint</code> : 检测失败是否终止进程，默认 <!-- --><code>false</code> 不终止<!-- --></li><li><code>detectUnusedFiles</code> : 是否检测未使用的文件，默认 <!-- --><code>true</code> 检测<!-- --></li><li><code>detectUnusedExport</code> : 是否检测未使用的导出，默认 <!-- --><code>true</code> 检测<!-- --></li><li><code>context</code> : 匹配开始的目录，默认为当前项目根目录<!-- --></li></ul><h2 id="define"><a aria-hidden="true" tabindex="-1" href="#define"><span class="icon icon-link"></span></a>define<!-- --></h2><ul><li>类型：<!-- --><code>Record&lt;string, string&gt;</code></li><li>默认值： 如下</li></ul><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">{ </span></div></div><div class=""><div class=""><span class="token plain">    &#x27;process.env.NODE_ENV&#x27; : process.env.NODE_ENV,</span></div></div><div class=""><div class=""><span class="token plain">    &#x27;process.env.HMR&#x27; : process.env.HMR, </span></div></div><div class=""><div class=""><span class="token plain">    &#x27;process.env.SOCKET_SERVER&#x27;: process.env.ERROR_OVERLAY&#x27; </span></div></div><div class=""><div class=""><span class="token plain">  }</span></div></div></pre></div><p>基于<!-- --><a href="https://webpack.js.org/plugins/define-plugin/">define-plugin 插件</a>设置代码中的可用变量。<!-- --></p></div><div class="dumi-default-container markdown" data-type="warning"><svg viewBox="64 64 896 896"><path d="M464 720a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"></path></svg><h4>🚨</h4><section><ol><li>属性值会经过一次 <!-- --><code>JSON.stringify</code> 转换。<!-- --></li><li>key 值的替换是通过语法形式来匹配的，比如配置了 <!-- --><code>{&#x27;a.b.c&#x27;: &#x27;abcValue&#x27;}</code> 是无法替换代码中的  <!-- --><code>a.b?.c</code> 的<!-- --></li></ol></section></div><div class="markdown"><p>比如，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">define: { FOO: &#x27;bar&#x27; }</span></div></div></pre></div><p>然后代码里的 <!-- --><code>console.log(hello, FOO)</code> 会被编译成 <!-- --><code>console.log(hello, &#x27;bar&#x27;)</code>。<!-- --></p><p>当你在 ts 的项目中使用这些变量时，你需要在 typings 文件中声明变量类型，以支持 ts 类型提示，比如：</p><p>如果你的 typings 文件是全局的：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token comment">// typings.d.ts</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">declare</span><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token constant">FOO</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span></div></div></pre></div><p>如果你的 typings 文件是非全局的（包含了 import/export）：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token comment">// typings.d.ts</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">import</span><span class="token plain"> </span><span class="token string">&#x27;./other.d.ts&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">declare</span><span class="token plain"> global </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"> </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token constant">FOO</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin">string</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="devtool"><a aria-hidden="true" tabindex="-1" href="#devtool"><span class="icon icon-link"></span></a>devtool<!-- --></h2><ul><li>类型：<!-- --><code>string</code></li><li>默认值：dev 时默认 <!-- --><code>cheap-module-source-map</code>，build 时候默认无 sourcemap<!-- --></li></ul><p>设置 sourcemap 生成方式。</p><p>常见可选值有：</p><ul><li><code>eval</code>，最快的类型，缺点是不支持低版本浏览器<!-- --></li><li><code>source-map</code>，最慢但最全的类型<!-- --></li></ul><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// 关闭 dev 阶段的 sourcemap 生成</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token comment">// 只设置 dev 阶段的 sourcemap</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">devtool</span><span class="token operator">:</span><span class="token plain"> process</span><span class="token punctuation">.</span><span class="token property-access">env</span><span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;development&#x27;</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token string">&#x27;eval&#x27;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">;</span></div></div></pre></div><h2 id="classpropertiesloose"><a aria-hidden="true" tabindex="-1" href="#classpropertiesloose"><span class="icon icon-link"></span></a>classPropertiesLoose<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>设置 babel class-properties 启用 loose</p><h2 id="esbuildminifyiife"><a aria-hidden="true" tabindex="-1" href="#esbuildminifyiife"><span class="icon icon-link"></span></a>esbuildMinifyIIFE<!-- --></h2><ul><li>类型：<!-- --><code>boolean</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>修复 esbuild 压缩器自动引入的全局变量导致的命名冲突问题。</p><p>由于 Umi 4 默认使用 esbuild 作为压缩器，该压缩器会自动注入全局变量作为 polyfill ，这可能会引发 异步块全局变量冲突、 qiankun 子应用和主应用全局变量冲突 等问题，通过打开该选项或切换 <!-- --><a href="/docs/api/config#jsminifier-webpack"><code>jsMinifier</code></a> 压缩器可解决此问题。<!-- --></p><p>更多信息详见 <!-- --><a href="https://github.com/vitejs/vite/pull/7948">vite#7948</a> 。<!-- --></p><p>示例,</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">esbuildMinifyIIFE</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span></div></div></pre></div><h2 id="externals"><a aria-hidden="true" tabindex="-1" href="#externals"><span class="icon icon-link"></span></a>externals<!-- --></h2><ul><li>类型：<!-- --><code>Record&lt;string, string&gt; | Function</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>设置哪些模块不打包，转而通过 <!-- --><code>&lt;script&gt;</code> 或其他方式引入，通常需要搭配 headScripts 配置使用。<!-- --></p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">// external react</span></div></div><div class=""><div class=""><span class="token plain">externals: { react: &#x27;React&#x27; },</span></div></div><div class=""><div class=""><span class="token plain">headScripts: [&#x27;https://unpkg.com/react@17.0.1/umd/react.production.min.js&#x27;],</span></div></div></pre></div><p>注意：不要轻易设置 antd 的 externals，由于依赖较多，使用方式复杂，可能会遇到较多问题，并且一两句话很难解释清楚。</p><h2 id="extrababelincludes"><a aria-hidden="true" tabindex="-1" href="#extrababelincludes"><span class="icon icon-link"></span></a>extraBabelIncludes<!-- --></h2><ul><li>类型：<!-- --><code>Array&lt;string | RegExp&gt;</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外需要做 Babel 编译的 NPM 包或目录。比如：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token keyword module">export</span><span class="token plain"> </span><span class="token keyword module">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">extraBabelIncludes</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 支持绝对路径</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token function">join</span><span class="token punctuation">(</span><span class="token plain">__dirname</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;../../common&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 支持 npm 包</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token string">&#x27;react-monaco-editor&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 转译全部路径含有 @scope 的包</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token operator">/</span><span class="token plain">@scope</span><span class="token operator">/</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></div></pre></div><h2 id="extrababelplugins"><a aria-hidden="true" tabindex="-1" href="#extrababelplugins"><span class="icon icon-link"></span></a>extraBabelPlugins<!-- --></h2><ul><li>类型：<!-- --><code>string[] | Function</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外的 babel 插件。可传入插件地址或插件函数。</p><h2 id="extrababelpresets"><a aria-hidden="true" tabindex="-1" href="#extrababelpresets"><span class="icon icon-link"></span></a>extraBabelPresets<!-- --></h2><ul><li>类型：<!-- --><code>string[] | Function</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外的 babel 插件集。可传入插件集地址或插件集函数。</p><h2 id="extrapostcssplugins"><a aria-hidden="true" tabindex="-1" href="#extrapostcssplugins"><span class="icon icon-link"></span></a>extraPostCSSPlugins<!-- --></h2><ul><li>类型：<!-- --><code>PostCSSPlugin[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外的 postcss 插件。</p><h2 id="exportstatic"><a aria-hidden="true" tabindex="-1" href="#exportstatic"><span class="icon icon-link"></span></a>exportStatic<!-- --></h2><ul><li>类型：<!-- --><code>{ extraRoutePaths: IUserExtraRoute[] | (() =&gt; IUserExtraRoute[] | Promise&lt;IUserExtraRoute[]&gt;), ignorePreRenderError: boolean }</code></li><li>默认值：<!-- --><code>undefined</code></li></ul><p>开启该配置后会针对每个路由单独输出 HTML 文件，通常用于静态站点托管。例如项目有如下路由：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-bash"><div class=""><div class=""><span class="token plain">/</span></div></div><div class=""><div class=""><span class="token plain">/docs</span></div></div><div class=""><div class=""><span class="token plain">/docs/a</span></div></div></pre></div><p>不开启 <!-- --><code>exportStatic</code> 时会输出：<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-bash"><div class=""><div class=""><span class="token plain">dist/index.html</span></div></div></pre></div><p>开启 <!-- --><code>exportStatic</code> 时会输出：<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-bash"><div class=""><div class=""><span class="token plain">dist/index.html</span></div></div><div class=""><div class=""><span class="token plain">dist/docs/index.html</span></div></div><div class=""><div class=""><span class="token plain">dist/docs/a/index.html</span></div></div></pre></div><p>通过 <!-- --><code>extraRoutePaths</code> 子配置项可以产出额外的页面，通常用于动态路由静态化。例如有如下路由：<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-bash"><div class=""><div class=""><span class="token plain">/news/:id</span></div></div></pre></div><p>默认情况下只会输出 <!-- --><code>dist/news/:id/index.html</code>，但可以通过配置 <!-- --><code>extraRoutePaths</code> 将其静态化：<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token comment">// .umirc.ts</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  exportStatic</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 配置固定值</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    extraRoutePaths</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;/news/1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;/news/2&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 也可以配置函数动态获取</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token function-variable function">extraRoutePaths</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword">async</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> res </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> </span><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#x27;https://api.example.com/news&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">      </span><span class="token keyword">const</span><span class="token plain"> data </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">await</span><span class="token plain"> res</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">      </span><span class="token keyword">return</span><span class="token plain"> data</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token plain">item</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">/news/</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">item</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>此时输出文件会变成：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-bash"><div class=""><div class=""><span class="token plain">dist/news/:id/index.html</span></div></div><div class=""><div class=""><span class="token plain">dist/news/1/index.html</span></div></div><div class=""><div class=""><span class="token plain">dist/news/2/index.html</span></div></div></pre></div><p><code>extraRoutePaths</code> 除了支持配置字符串数据，还可以配置成对象数组，用于启用 SSR 时又希望对部分路由禁用预渲染的场景，例如：<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token comment">// .umirc.ts</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  exportStatic</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 输出额外页面文件但跳过预渲染</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    extraRoutePaths</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token plain"> path</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/news/1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> prerender</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p><code>exportStatic</code> 在搭配 <!-- --><code>ssr</code> 使用时会进行预渲染，在预渲染失败时会抛出异常并终止构建，可以通过配置 <!-- --><code>ignorePreRenderError</code> 来忽略预渲染失败的错误，例如：<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token comment">// .umirc.ts</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  exportStatic</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 忽略预渲染失败的错误</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    ignorePreRenderError</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="favicons"><a aria-hidden="true" tabindex="-1" href="#favicons"><span class="icon icon-link"></span></a>favicons<!-- --></h2><ul><li>类型：<!-- --><code>string[]</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>默认情况下，站点将使用约定 <!-- --><a href="/docs/guides/directory-structure#favicon"><code>favicon</code></a> 来创建图标的 meta 头标签。<!-- --></p><p>通过如下方式自定义：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">favicons</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// 完整地址</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token string">&#x27;https://domain.com/favicon.ico&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// 此时将指向 `/favicon.png` ，确保你的项目含有 `public/favicon.png`</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token string">&#x27;/favicon.png&#x27;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">]</span></div></div></pre></div><h2 id="forget"><a aria-hidden="true" tabindex="-1" href="#forget"><span class="icon icon-link"></span></a>forget<!-- --></h2><ul><li>类型：<!-- --><code>{ ReactCompilerConfig: object }</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>是否开启 React Compiler（React Forget）功能。参考 <!-- --><a href="https://react.dev/learn/react-compiler">https://react.dev/learn/react-compiler</a> 。<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">forget</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  ReactCompilerConfig</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div></pre></div><p>注意：</p><p>1、forget 和 mfsu、mako 暂时不兼容，如果开启了 forget，同时 mfsu、mako 有打开时会抛错。
2、forget 需要 react 19，使用时，请手动安装 react@rc 和 react-dom@rc 到项目依赖。</p><h2 id="forktschecker"><a aria-hidden="true" tabindex="-1" href="#forktschecker"><span class="icon icon-link"></span></a>forkTSChecker<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>开启 TypeScript 的类型检查。基于 fork-ts-checker-webpack-plugin，配置项可参考 <!-- --><a href="https://github.com/TypeStrong/fork-ts-checker-webpack-plugin#options">fork-ts-checker-webpack-plugin 的 Options</a>。<!-- --></p><h2 id="hash"><a aria-hidden="true" tabindex="-1" href="#hash"><span class="icon icon-link"></span></a>hash<!-- --></h2><ul><li>类型：<!-- --><code>boolean</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>开启 hash 模式，让 build 之后的产物包含 hash 后缀。 通常用于增量发布和避免浏览器加载缓存。</p><p>启用后，产物通常是这样，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">+ dist</span></div></div><div class=""><div class=""><span class="token plain">    - logo.sw892d.png</span></div></div><div class=""><div class=""><span class="token plain">    - umi.df723s.js</span></div></div><div class=""><div class=""><span class="token plain">    - umi.8sd8fw.css</span></div></div><div class=""><div class=""><span class="token plain">    - index.html</span></div></div></pre></div><p>注意：HTML 文件始终没有 hash 后缀。</p><h2 id="headscripts"><a aria-hidden="true" tabindex="-1" href="#headscripts"><span class="icon icon-link"></span></a>headScripts<!-- --></h2><ul><li>类型：<!-- --><code>string[] | Script[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置 <!-- --><code>&lt;head&gt;</code> 中的额外 script。<!-- --></p><p>比如，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">headScripts</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">alert(1);</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">https://a.com/b.js</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><p>会生成 HTML，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-html"><div class=""><div class=""><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token script language-javascript"></span></div></div><div class=""><div class=""><span class="token script language-javascript">  </span><span class="token script language-javascript function">alert</span><span class="token script language-javascript punctuation">(</span><span class="token script language-javascript number">1</span><span class="token script language-javascript punctuation">)</span><span class="token script language-javascript punctuation">;</span><span class="token script language-javascript"></span></div></div><div class=""><div class=""><span class="token script language-javascript"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">src</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">https://a.com/b.js</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token script"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span></div></div></pre></div><p>如果需要额外属性，切换到对象格式，比如，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">headScripts</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">src</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/foo.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token literal-property property">defer</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">content</span><span class="token operator">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">alert(&#x27;你好&#x27;);</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token literal-property property">charset</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;utf-8&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><h2 id="helmet"><a aria-hidden="true" tabindex="-1" href="#helmet"><span class="icon icon-link"></span></a>helmet<!-- --></h2><ul><li>类型：<!-- --><code>boolean</code></li><li>默认值：<!-- --><code>true</code></li></ul><p>配置 <!-- --><code>react-helmet-async</code> 的集成，当设置为 <!-- --><code>false</code> 时，不会集 成 <!-- --><code>react-helmet-async</code>，此时无法从框架中 <!-- --><code>import { Helmet }</code> 使用，同时构建产物也会减少<!-- --><a href="https://bundlephobia.com/package/react-helmet-async">相应的尺寸</a>。<!-- --></p><h2 id="history"><a aria-hidden="true" tabindex="-1" href="#history"><span class="icon icon-link"></span></a>history<!-- --></h2><ul><li>类型：<!-- --><code>{ type: &#x27;browser&#x27; | &#x27;hash&#x27; | &#x27;memory&#x27; }</code></li><li>默认值：<!-- --><code>{ type: &#x27;browser&#x27; }</code></li></ul><p>设置路由 history 类型。</p><h2 id="historywithquery"><a aria-hidden="true" tabindex="-1" href="#historywithquery"><span class="icon icon-link"></span></a>historyWithQuery<!-- --></h2><ul><li>类型：<!-- --><code>‌{}</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>让 history 带上 query。除了通过 <!-- --><code>useNavigate</code> 进行的跳转场景，此时还需自行处理 query。<!-- --></p><h2 id="https"><a aria-hidden="true" tabindex="-1" href="#https"><span class="icon icon-link"></span></a>https<!-- --></h2><ul><li>类型：<!-- --><code>{ cert: string; key: string; hosts: string[]; http2?: boolean }</code></li><li>默认值：<!-- --><code>{ hosts: [&#x27;127.0.0.1&#x27;, &#x27;localhost&#x27;] }</code></li></ul><p>开启 dev 的 https 模式，Umi 4 默认使用 <!-- --><a href="https://github.com/FiloSottile/mkcert"><code>mkcert</code></a> 快捷创建证书，请确保已经安装。<!-- --></p><p>关于参数。</p><ul><li><code>cert</code> 和 <!-- --><code>key</code> 分别用于指定 cert 和 key 文件。<!-- --></li><li><code>hosts</code> 用于指定要支持 https 访问的 host，默认是 <!-- --><code>[&#x27;127.0.0.1&#x27;, &#x27;localhost&#x27;]</code>。<!-- --></li><li><code>http2</code> 用于指定是否使用 HTTP 2.0 协议，默认是 true（使用 HTTP 2.0 在 Chrome 或 Edge 浏览器中中有偶然出现 <!-- --><code>ERR_HTTP2_PROTOCOL_ERRO</code>报错，如有遇到，建议  配置为 false）。<!-- --></li></ul><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">https</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="icons"><a aria-hidden="true" tabindex="-1" href="#icons"><span class="icon icon-link"></span></a>icons<!-- --></h2><ul><li>类型：<!-- --><code>{ autoInstall: {}; alias: Record&lt;string,string&gt;; include: Array&lt;string&gt;;  }</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>你就可以通过 umi 导出的 Icon 组件快捷地引用 icon 集或者本地的 icon。</p><h3 id="icon-集使用"><a aria-hidden="true" tabindex="-1" href="#icon-集使用"><span class="icon icon-link"></span></a>icon 集使用<!-- --></h3><p>在 umi 配置文件设置，开启 icons 功能，并允许自动安装图标库。</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">icons</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> autoInstall</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div></pre></div><p>页面使用：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token keyword">import</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> Icon </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token operator">&lt;</span><span class="token plain">Icon icon</span><span class="token operator">=</span><span class="token string">&quot;fa:home&quot;</span><span class="token plain"> </span><span class="token operator">/</span><span class="token operator">&gt;</span></div></div></pre></div><p>icon 里包含的字符串是 <!-- --><code>collect:icon</code> 的组合，以 <!-- --><code>:</code> 分割。Icon 集推荐在 <!-- --><a href="https://icones.js.org/">Icônes 网站</a>上搜索。<!-- --></p><h2 id="本地-icon-使用"><a aria-hidden="true" tabindex="-1" href="#本地-icon-使用"><span class="icon icon-link"></span></a>本地 icon 使用<!-- --></h2><p>在 umi 配置文件设置，开启 icons 功能。</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">icons</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div></pre></div><p>本地 svg icon 的使用需要把 svg 保存在 <!-- --><code>src/icons</code> 目录下，然后通过 <!-- --><code>local</code> 这个前缀引用，比如在 <!-- --><code>src/icons</code> 目录下有个 <!-- --><code>umi.svg</code>，然后可以这样引用。<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-tsx"><div class=""><div class=""><span class="token keyword">import</span><span class="token plain"> </span><span class="token imports punctuation">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Icon</span><span class="token imports"> </span><span class="token imports punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;umi&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Icon</span><span class="token tag"> </span><span class="token tag attr-name">icon</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">local:umi</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span></div></div></pre></div><h3 id="配置项介绍"><a aria-hidden="true" tabindex="-1" href="#配置项介绍"><span class="icon icon-link"></span></a>配置项介绍<!-- --></h3><ul><li><code>autoInstall</code> 表示是否自动安装 icon 集；tnpm/cnpm 客户端暂不支持，但可以通过手动按需安装对应 icon 集合包 <!-- --><code>@iconify-json/collection-name</code> 。 参考：<!-- --><a href="https://github.com/iconify/icon-sets/blob/master/collections.md">Icon 集合列表</a>, collection-name 为列表中的 <!-- --><em><strong>Icon set prefix</strong></em> 项。<!-- --></li><li><code>alias</code> 用于配置 icon 的别名，比如配置了 <!-- --><code>alias:{home:&#x27;fa:home&#x27;}</code> 后就可以通过 <!-- --><code>icon=&quot;home&quot;</code> 使用 <!-- --><code>fa:home</code> 这个 icon 了。<!-- --></li><li><code>include</code> 配置需要强制使用的 icon， 例如 <!-- --><code>include: [&#x27;fa:home&#x27;, &#x27;local:icon&#x27;]</code>。常见的使用场景：将 icon 字符串定义在一个 map 中，导致无法检测到；在 <!-- --><code>mdx</code> 使用了 <!-- --><code>Icon</code> 组件。<!-- --></li></ul><h3 id="icon-组件属性"><a aria-hidden="true" tabindex="-1" href="#icon-组件属性"><span class="icon icon-link"></span></a>Icon 组件属性<!-- --></h3><ul><li>icon，指定 icon</li><li>width，svg 宽度</li><li>height，svg 高度</li><li>viewBox，svg viewBox</li><li>style，外部容器样式</li><li>className，外部容器样式名</li><li>spin，是否自动旋转</li><li>rotate，配置旋转角度，支持多种格式，比如 <!-- --><code>1</code>，<!-- --><code>&quot;30deg&quot;</code>、<!-- --><code>&quot;25%&quot;</code> 都可以<!-- --></li><li>flip，支持 <!-- --><code>vertical</code>、<!-- --><code>horizontal</code>，或者他们的组合 <!-- --><code>vertical,horizontal</code></li></ul><h2 id="ignoremomentlocale"><a aria-hidden="true" tabindex="-1" href="#ignoremomentlocale"><span class="icon icon-link"></span></a>ignoreMomentLocale<!-- --></h2><ul><li>类型：<!-- --><code>boolean</code></li><li>默认值：<!-- --><code>true</code></li></ul><p>忽略 moment 的 locale 文件，用于减少产物尺寸。</p><p>注意：此功能默认开。配置 <!-- --><code>ignoreMomentLocale: false</code> 关闭。<!-- --></p><h2 id="inlinelimit"><a aria-hidden="true" tabindex="-1" href="#inlinelimit"><span class="icon icon-link"></span></a>inlineLimit<!-- --></h2><ul><li>类型：<!-- --><code>number</code></li><li>默认值：<!-- --><code>10000</code> (10k)<!-- --></li></ul><p>配置图片文件是否走 base64 编译的阈值。默认是 10000 字节，少于他会被编译为 base64 编码，否则会生成单独的文件。</p><h2 id="jsminifier-webpack"><a aria-hidden="true" tabindex="-1" href="#jsminifier-webpack"><span class="icon icon-link"></span></a>jsMinifier (webpack)<!-- --></h2><ul><li>类型：<!-- --><code>string</code>，可选值 <!-- --><code>esbuild</code>, <!-- --><code>terser</code>, <!-- --><code>swc</code>, <!-- --><code>uglifyJs</code>, <!-- --><code>none</code></li><li>默认值：<!-- --><code>esbuild</code></li></ul><p>配置构建时压缩 JavaScript 的工具；<!-- --><code>none</code>表示不压缩。<!-- --></p><p>示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  jsMinifier</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;esbuild&#x27;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="jsminifieroptions"><a aria-hidden="true" tabindex="-1" href="#jsminifieroptions"><span class="icon icon-link"></span></a>jsMinifierOptions<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p><code>jsMinifier</code> 的配置项；默认情况下压缩代码会移除代码中的注释，可以通过对应的 <!-- --><code>jsMinifier</code> 选项来保留注释。<!-- --></p><p>示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">jsMinifier</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;esbuild&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">jsMinifierOptions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">minifyWhitespace</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">minifyIdentifiers</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token literal-property property">minifySyntax</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>配置项需要和所使用的工具对应，具体参考对应文档：</p><ul><li><a href="https://esbuild.github.io/api/#minify">esbuild 参考</a></li><li><a href="https://terser.org/docs/api-reference#minify-options">terser 参考</a></li><li><a href="https://swc.rs/docs/configuration/minification#configuration">swc 参考</a></li><li><a href="https://lisperator.net/uglifyjs/compress">uglifyJs 参考</a></li></ul><h2 id="lessloader"><a aria-hidden="true" tabindex="-1" href="#lessloader"><span class="icon icon-link"></span></a>lessLoader<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{ modifyVars: userConfig.theme, javascriptEnabled: true }</code></li></ul><p>设置 less-loader 的 Options。具体参考参考 <!-- --><a href="https://github.com/webpack-contrib/less-loader#lessoptions">less-loader 的 Options</a>。<!-- --></p><blockquote><p>默认是用 less@4 版本，如果需要兼容 less@3 请配置使用<!-- --><a href="https://lesscss.org/usage/#less-options-math">less-options-math</a>。<!-- --></p></blockquote><h2 id="legacy"><a aria-hidden="true" tabindex="-1" href="#legacy"><span class="icon icon-link"></span></a>legacy<!-- --></h2><ul><li>类型：<!-- --><code>{ buildOnly?: boolean; nodeModulesTransform?: boolean; checkOutput?: boolean; }</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>当你需要兼容低版本浏览器时，可能需要该选项，开启后将默认使用 <!-- --><strong>非现代</strong> 的打包工具做构建，这会显著增加你的构建时间。<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">legacy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span></div></div></pre></div><p>默认只在构建时生效，通过设定 <!-- --><code>buildOnly: false</code> 关闭该限制。<!-- --></p><p>可通过打开 <!-- --><code>checkOutput: true</code> 选项，每次构建结束后将自动运行 <!-- --><a href="https://github.com/yowainwright/es-check"><code>es-check</code></a> 检查产物 <!-- --><code>.js</code> 文件的语法是否为 es5 格式。<!-- --></p><p>开启此选项后：</p><ul><li>不支持自定义 <!-- --><code>srcTranspiler</code> 、<!-- --><code>jsMinifier</code> 、 <!-- --><code>cssMinifier</code> 选项。<!-- --></li><li>将转译全部 <!-- --><code>node_modules</code> 内的源码，<!-- --><code>targets</code> 兼容至 ie 11 ，通过指定 <!-- --><code>nodeModulesTransform: false</code> 来取消对 <!-- --><code>node_modules</code> 的转换，此时你可以通过配置 <!-- --><code>extraBabelIncludes</code> 更精准的转换那些有兼容性问题的包。<!-- --></li><li>因低版本浏览器不支持 Top level await ，当你在使用 <!-- --><code>externals</code> 时，确保你没有在使用异步性质的 <!-- --><a href="https://webpack.js.org/configuration/externals/#externalstype"><code>externalsType</code></a> 时又使用了同步导入依 赖。<!-- --></li></ul><h2 id="links"><a aria-hidden="true" tabindex="-1" href="#links"><span class="icon icon-link"></span></a>links<!-- --></h2><ul><li>类型：<!-- --><code>Link[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外的 link 标签。</p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">links</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">href</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/foo.css&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token literal-property property">rel</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;preload&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><h2 id="mako"><a aria-hidden="true" tabindex="-1" href="#mako"><span class="icon icon-link"></span></a>mako <!-- --><span class="dumi-default-badge">4.3.2+</span></h2><ul><li>类型: <!-- --><code>{ plugins?: Array&lt;{ load?: ((...args: any[]) =&gt; unknown) | undefined; generateEnd?: ((...args: any[]) =&gt; unknown) | undefined; }&gt; | undefined; px2rem?: { root?: number | undefined; propBlackList?: Array&lt;string&gt; | undefined; propWhiteList?: Array&lt;string&gt; | undefined; selectorBlackList?: Array&lt;string&gt; | undefined; selectorWhiteList?: Array&lt;string&gt; | undefined; selectorDoubleList?: Array&lt;string&gt; | undefined; } | undefined; experimental?: { webpackSyntaxValidate?: Array&lt;string&gt; | undefined; } | undefined; flexBugs?: boolean | undefined; moduleIdStrategy?: string | undefined; optimization?: { skipModules?: boolean | undefined; } | undefined; }</code></li><li>默认值: <!-- --><code>{}</code></li></ul><p>使用 <!-- --><a href="https://makojs.dev/">mako</a> 用于编译以显著提高构建速度。
通过配置以启用这个能力，配置将传递给mako。这里只提供了一些常用的配置，更多的配置可以在 <!-- --><code>mako.config.json</code> 文件中设置。有关更多信息，请参阅<!-- --><a href="https://makojs.dev/docs/config">mako-config文档</a>。<!-- --></p><h2 id="manifest"><a aria-hidden="true" tabindex="-1" href="#manifest"><span class="icon icon-link"></span></a>manifest<!-- --></h2><ul><li>类型：<!-- --><code>{ fileName: string; basePath: string }</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>开启 build 时生成额外的 manifest 文件，用于描述产物。</p><p>关于参数。<!-- --><code>fileName</code> 是生成的文件名，默认是 <!-- --><code>asset-manifest.json</code>；<!-- --><code>basePath</code> 会给所有文件路径加上前缀。<!-- --></p><p>注意：只在 build 时生成。</p><h2 id="mdx"><a aria-hidden="true" tabindex="-1" href="#mdx"><span class="icon icon-link"></span></a>mdx<!-- --></h2><ul><li>类型：<!-- --><code>{ loader: string; loaderOptions: Object }</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>mdx loader 配置 loader 配置路径，<!-- --><a href="https://github.com/mdx-js/mdx/blob/v1/packages/mdx/index.js#L12">loaderOptions</a> 配置参数<!-- --></p><h2 id="metas"><a aria-hidden="true" tabindex="-1" href="#metas"><span class="icon icon-link"></span></a>metas<!-- --></h2><ul><li>类型：<!-- --><code>Meta[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外的 meta 标签。</p><p>比如，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">metas</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;keywords&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token literal-property property">content</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;umi, umijs&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;description&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token literal-property property">content</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;React framework.&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><p>会生成以下 HTML，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-html"><div class=""><div class=""><span class="token tag punctuation">&lt;</span><span class="token tag">meta</span><span class="token tag"> </span><span class="token tag attr-name">name</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">keywords</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">content</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">umi, umijs</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">meta</span><span class="token tag"> </span><span class="token tag attr-name">name</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">description</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">content</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">React framework.</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span></div></div></pre></div><h2 id="mfsu"><a aria-hidden="true" tabindex="-1" href="#mfsu"><span class="icon icon-link"></span></a>mfsu<!-- --></h2><ul><li>类型：<!-- --><code>{ esbuild: boolean; mfName: string; cacheDirectory: string; strategy: &#x27;normal&#x27; | &#x27;eager&#x27;; include?: string[]; chainWebpack: (memo, args) =&gt; void; exclude?: Array&lt;string | RegExp&gt; }</code></li><li>默认值：<!-- --><code>{ mfName: &#x27;mf&#x27;, strategy: &#x27;normal&#x27; }</code></li></ul><p>配置基于 <!-- --><a href="https://module-federation.github.io/">Module Federation</a> 的提速功能。<!-- --></p><p>关于参数</p><ul><li><code>esbuild</code> 配为 <!-- --><code>true</code> 后会让依赖的预编译走 esbuild，从而让首次启动更快，缺点是二次编译不会有物理缓存，稍慢一些；推荐项目依赖比较稳定的项目使用。<!-- --></li><li><code>mfName</code> 是此方案的 remote 库的全局变量，默认是 mf，通常在微前端中为了让主应用和子应用不冲突才会进行配置<!-- --></li><li><code>cacheDirectory</code> 可以自定义缓存目录，默认是 <!-- --><code>node_modules/.cache/mfsu</code></li><li><code>chainWebpack</code> 用链式编程的方式修改 依赖的 webpack 配置，基于 webpack-chain，具体 API 可参考 <!-- --><a href="https://github.com/sorrycc/webpack-chain">webpack-api 的文档</a>；<!-- --></li><li><code>runtimePublicPath</code> 会让修改 mf 加载文件的 publicPath 为 <!-- --><code>window.publicPath</code></li><li><code>strategy</code> 指定 mfsu 编译依赖的时机; <!-- --><code>normal</code> 模式下，采用 babel 编译分析后，构建 Module Federation 远端包；<!-- --><code>eager</code> 模式下采用静态分析的方式，和项目代码同时发起构建。<!-- --></li><li><code>include</code> 仅在 <!-- --><code>strategy: &#x27;eager&#x27; </code> 模式下生效， 用于补偿在 eager 模式下，静态分析无法分析到的依赖，例如 <!-- --><code>react</code> 未进入 Module Federation 远端模块可以这样配置 <!-- --><code>{ include: [ &#x27;react&#x27; ] }</code></li><li><code>exclude</code> 手动排除某些不需要被 MFSU 处理的依赖, 字符串或者正则的形式，比如 <!-- --><code>vant</code> 不希望走 MFSU 处理，可以配置 <!-- --><code>{ exclude: [ &#x27;vant&#x27; ] }</code> 匹配逻辑为全词匹配，也可以配置 <!-- --><code>{ exclude: [ /vant/ ] }</code> 只要 <!-- --><code>import</code> 路径中匹配该正则的依赖都不走 MFSU 处理<!-- --></li></ul><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// 用 esbuild 做依赖预编译</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">mfsu</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">esbuild</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token comment">// 关闭 mfsu 功能</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">mfsu</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">;</span></div></div></pre></div><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// webpack 配置修改</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">mfsu</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token function">chainWebpack</span><span class="token punctuation">(</span><span class="token parameter">memo</span><span class="token parameter punctuation">,</span><span class="token parameter"> args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token comment">// 添加额外插件</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    memo</span><span class="token punctuation">.</span><span class="token method function property-access">plugin</span><span class="token punctuation">(</span><span class="token string">&#x27;hello&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">use</span><span class="token punctuation">(</span><span class="token maybe-class-name">Plugin</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token spread operator">...</span><span class="token plain">args</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> memo</span><span class="token punctuation">;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>注意：此功能默认开。配置 <!-- --><code>mfsu: false</code> 关闭。<!-- --></p><h2 id="mock"><a aria-hidden="true" tabindex="-1" href="#mock"><span class="icon icon-link"></span></a>mock<!-- --></h2><ul><li>类型：<!-- --><code>{ exclude: string[], include: string[] }</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>配置 mock 功能。</p><p>关于参数。<!-- --><code>exclude</code> 用于排除不需要的 mock 文件；<!-- --><code>include</code> 用于额外添加 mock 目录之外的 mock 文件。<!-- --></p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// 让所有 pages 下的 _mock.ts 文件成为 mock 文件</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">mock</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">include</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;src/pages/**/_mock.ts&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>注意：此功能默认开。配置 <!-- --><code>mock: false</code> 关闭。<!-- --></p><h2 id="mountelementid"><a aria-hidden="true" tabindex="-1" href="#mountelementid"><span class="icon icon-link"></span></a>mountElementId<!-- --></h2><ul><li>类型：<!-- --><code>string</code></li><li>默认值：<!-- --><code>&#x27;root&#x27;</code></li></ul><p>配置 react 组件树渲染到 HTML 中的元素 id。</p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">mountElementId</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;container&#x27;</span></div></div></pre></div><h2 id="monoreporedirect"><a aria-hidden="true" tabindex="-1" href="#monoreporedirect"><span class="icon icon-link"></span></a>monorepoRedirect<!-- --></h2><ul><li>类型：<!-- --><code>{ srcDir?: string[], exclude?: RegExp[], peerDeps?: boolean, useRootProject?: boolean }</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>在 monorepo 中使用 Umi 时，你可能需要引入其他子包的组件、工具方法等，通过开启此选项来重定向这些子包的导入到他们的源码位置（默认为 <!-- --><code>src</code> 文件夹），这也可以解决 <!-- --><code>MFSU</code> 场景改动子包不热更新的问题。<!-- --></p><p>这种重定向的好处是：支持热更新，无需预构建其他子包即可进行开发。</p><p>通过配置 <!-- --><code>srcDir</code> 来调整识别源码文件夹的优先位置，通过 <!-- --><code>exclude</code> 来设定不需要重定向的依赖范围。<!-- --></p><p>示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// 默认重定向到子包的 src 文件夹</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">monorepoRedirect</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token comment">// 在子包中寻找，优先定向到 libs 文件夹</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">monorepoRedirect</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">srcDir</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;libs&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;src&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token comment">// 不重定向 @scope/* 的子包</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">monorepoRedirect</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">exclude</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">^@scope\/.+</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>在实际的大型业务 monorepo 中，每个子包的依赖都是从他们的目录开始向上寻找 <!-- --><code>node_modules</code> 并加载的，但在本地开发时，依赖都安装在 <!-- --><code>devDependencies</code> ，和从 npm 上安装表现不一致，所以不可避免会遇到多实例问题。<!-- --></p></div><div class="dumi-default-container markdown" data-type="info"><svg viewBox="64 64 896 896"><path d="M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"></path><path d="M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"></path></svg><h4>INFO</h4><section><p>举个例子，每个子包在本地开发时都需要 <!-- --><code>antd</code> ，在 <!-- --><code>devDependencies</code> 中安装了，也在 <!-- --><code>peerDependencies</code> 中指明了 <!-- --><code>antd</code> ，我们预期该包发布到 npm ，被某个项目安装后， <!-- --><code>antd</code> 是使用的项目本身的依赖，全局唯一，但由于在 monorepo 中，指定在 <!-- --><code>devDependencies</code> 中的依赖必定存在，且子包代码寻找依赖时是从该子包进行的，导致了每个子包都用了自己的 <!-- --><code>antd</code> ，出现了产物中有多份 <!-- --><code>antd</code> 、产物体积增大、消息队列被破坏等情况。<!-- --></p></section></div><div class="markdown"><p>为了解决这种问题，我们约定：</p><p>当打开 <!-- --><code>peerDeps</code> 选项时，所有子包指明的 <!-- --><code>peerDependencies</code> 都会被自动添加 <!-- --><code>alias</code> 重定向唯一化，避免多实例的存在：<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">monorepoRedirect</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> peerDeps</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span></div></div></pre></div><p>经过重定向，依赖全局唯一，便可以在开发时保持和在 npm 上安装包后的体验一致。</p><p>useRootProject: 当你的项目不在 monorepo 子文件夹里，而在 monorepo 根的话，你可以开启这个选项，以使 monorepoRedirect 生效。</p><h2 id="mpa"><a aria-hidden="true" tabindex="-1" href="#mpa"><span class="icon icon-link"></span></a>mpa<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>启用 <!-- --><a href="/docs/guides/mpa">mpa 模式</a>。<!-- --></p><h2 id="outputpath"><a aria-hidden="true" tabindex="-1" href="#outputpath"><span class="icon icon-link"></span></a>outputPath<!-- --></h2><ul><li>类型：<!-- --><code>string</code></li><li>默认值：<!-- --><code>dist</code></li></ul><p>配置输出路径。</p><p>注意：不允许设定为 src、public、pages、mock、config、locales、models 等约定式功能相关的目录。</p><h2 id="phantomdependency"><a aria-hidden="true" tabindex="-1" href="#phantomdependency"><span class="icon icon-link"></span></a>phantomDependency<!-- --></h2><ul><li>类型：<!-- --><code>{ exclude: string[] }</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>执行幽灵依赖检测。</p><p>当使用未在 package.json 中声明的依赖，以及也没有通过 alias 或 externals 进行配置时，会抛错并提醒。</p><p><img src="https://mdn.alipayobjects.com/huamei_ddtbzw/afts/img/A*k5uoQ5TOPooAAAAAAAAAAAAADkCKAQ/original" alt=""/></p><p>如遇到有需要需做白名单处理，可通过 exclude 配置项实现，exclude 的项是 npm 依赖的包名。</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token keyword">export</span><span class="token plain"> </span><span class="token keyword">default</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  phantomDependency</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    exclude</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;lodash&#x27;</span><span class="token punctuation">]</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="plugins"><a aria-hidden="true" tabindex="-1" href="#plugins"><span class="icon icon-link"></span></a>plugins<!-- --></h2><ul><li>类型：<!-- --><code>string[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外的 Umi 插件。</p><p>数组项为指向插件的路径，可以是 npm 依赖、相对路径或绝对路径。如果是相对路径，则会从项目根目录开始找。</p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// npm 依赖</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token string">&#x27;umi-plugin-hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// 相对路径</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token string">&#x27;./plugin&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// 绝对路径</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">__dirname</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/plugin.js</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><h2 id="polyfill"><a aria-hidden="true" tabindex="-1" href="#polyfill"><span class="icon icon-link"></span></a>polyfill<!-- --></h2><ul><li>类型：<!-- --><code>{ imports: string[] }</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>设置按需引入的 polyfill。默认全量引入。</p><p>比如只引入 core-js 的 stable 部分，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">polyfill</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">imports</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;core-js/stable&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>如果对于性能有更极致的要求，可以考虑按需引入，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">polyfill</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">imports</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;core-js/features/promise/try&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;core-js/proposals/math-extensions&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>注意：此功能默认开。配置 <!-- --><code>polyfill: false</code> 或设置环境变量 <!-- --><code>BABEL_POLYFILL=none</code> 关闭。<!-- --></p><h2 id="postcssloader"><a aria-hidden="true" tabindex="-1" href="#postcssloader"><span class="icon icon-link"></span></a>postcssLoader<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>设置 <!-- --><a href="https://github.com/webpack-contrib/postcss-loader#options">postcss-loader 的配置项</a>。<!-- --></p><h2 id="presets"><a aria-hidden="true" tabindex="-1" href="#presets"><span class="icon icon-link"></span></a>presets<!-- --></h2><ul><li>类型：<!-- --><code>string[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外的 Umi 插件集。</p><p>数组项为指向插件集的路径，可以是 npm 依赖、相对路径或绝对路径。如果是相对路径，则会从项目根目录开始找。</p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">presets</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// npm 依赖</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token string">&#x27;umi-preset-hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// 相对路径</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token string">&#x27;./preset&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token comment">// 绝对路径</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token template-string template-punctuation string">`</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">__dirname</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">/preset.js</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><h2 id="proxy"><a aria-hidden="true" tabindex="-1" href="#proxy"><span class="icon icon-link"></span></a>proxy<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>配置代理功能。</p><p>比如，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">proxy</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token string-property property">&#x27;/api&#x27;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token string-property property">&#x27;target&#x27;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;http://jsonplaceholder.typicode.com/&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token string-property property">&#x27;changeOrigin&#x27;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token string-property property">&#x27;pathRewrite&#x27;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token string-property property">&#x27;^/api&#x27;</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><p>然后访问 <!-- --><code>/api/users</code> 就能访问到 <!-- --><a href="http://jsonplaceholder.typicode.com/users">http://jsonplaceholder.typicode.com/users</a> 的数据。<!-- --></p><p>注意：proxy 功能仅在 dev 时有效。</p><h2 id="publicpath"><a aria-hidden="true" tabindex="-1" href="#publicpath"><span class="icon icon-link"></span></a>publicPath<!-- --></h2><ul><li>类型：<!-- --><code>string</code></li><li>默认值：<!-- --><code>/</code></li></ul><p>配置 webpack 的 publicPath。</p><h2 id="reactrouter5compat"><a aria-hidden="true" tabindex="-1" href="#reactrouter5compat"><span class="icon icon-link"></span></a>reactRouter5Compat<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>启用 react-router 5 兼容模式。此模式下，路由组件的 props 会包含 location、match、history 和 params 属性，和 react-router 5 的保持一致。</p><p>但要注意的是，</p><ol><li>此模式下会有额外的 re-render</li><li>由于依赖库 history 更新，location 中依旧没有 query 属性</li></ol><h2 id="routes"><a aria-hidden="true" tabindex="-1" href="#routes"><span class="icon icon-link"></span></a>routes<!-- --></h2><ul><li>类型：<!-- --><code>Route[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置路由。更多信息，请查看 <!-- --><a href="/docs/guides/routes#%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1">配置路由</a></p><h2 id="routeloader"><a aria-hidden="true" tabindex="-1" href="#routeloader"><span class="icon icon-link"></span></a>routeLoader<!-- --></h2><ul><li>类型：<!-- --><code>{ moduleType: &#x27;esm&#x27; | &#x27;cjs&#x27; }</code></li><li>默认值：<!-- --><code>{ moduleType: &#x27;esm&#x27; }</code></li></ul><p>配置路由加载方式。moduleType 配置为 &#x27;cjs&#x27; 会用 <!-- --><code>require</code> 的方式加载路由组件。<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token comment">// moduleType: esm</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token string-property property">&#x27;index&#x27;</span><span class="token operator">:</span><span class="token plain"> React</span><span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: &quot;p__index&quot; */</span><span class="token string">&#x27;../../pages/index.tsx&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">
</span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token comment">// moduleType: cjs</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token string-property property">&#x27;index&#x27;</span><span class="token operator">:</span><span class="token plain"> React</span><span class="token punctuation">.</span><span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">=&gt;</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../../pages/index.tsx&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></div></div></pre></div><h2 id="run"><a aria-hidden="true" tabindex="-1" href="#run"><span class="icon icon-link"></span></a>run<!-- --></h2><ul><li>类型：<!-- --><code>{ globals: string[] }</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>run 命令的全局注入配置。添加<!-- --><code>[&#x27;zx/globals&#x27;]</code>，在使用<!-- --><code>umi run ./script.ts</code>的时候，umi会自动注入<!-- --><code>import &#x27;zx/globals&#x27;;</code>，从而省略掉每个脚本都要写<!-- --><code>import &#x27;zx/globals&#x27;;</code>。<!-- --></p><h2 id="runtimepublicpath"><a aria-hidden="true" tabindex="-1" href="#runtimepublicpath"><span class="icon icon-link"></span></a>runtimePublicPath<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>启用运行时 publicPath，开启后会使用 <!-- --><code>window.publicPath</code> 作为资源动态加载的起始路径。<!-- --></p><p>比如，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">runtimePublicPath</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span></div></div></pre></div><h2 id="scripts"><a aria-hidden="true" tabindex="-1" href="#scripts"><span class="icon icon-link"></span></a>scripts<!-- --></h2><ul><li>类型：<!-- --><code>string[] | Script[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置 <!-- --><code>&lt;body&gt;</code> 中额外的 script 标签。<!-- --></p><p>比如，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">scripts</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">alert(1);</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">https://a.com/b.js</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><p>会生成 HTML，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-html"><div class=""><div class=""><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token script language-javascript"></span></div></div><div class=""><div class=""><span class="token script language-javascript">  </span><span class="token script language-javascript function">alert</span><span class="token script language-javascript punctuation">(</span><span class="token script language-javascript number">1</span><span class="token script language-javascript punctuation">)</span><span class="token script language-javascript punctuation">;</span><span class="token script language-javascript"></span></div></div><div class=""><div class=""><span class="token script language-javascript"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">script</span><span class="token tag"> </span><span class="token tag attr-name">src</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">https://a.com/b.js</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token script"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">script</span><span class="token tag punctuation">&gt;</span></div></div></pre></div><p>如果需要额外属性，切换到对象格式，比如，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">scripts</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">src</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;/foo.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token literal-property property">defer</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token literal-property property">content</span><span class="token operator">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">alert(&#x27;你好&#x27;);</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token literal-property property">charset</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;utf-8&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><h2 id="sassloader"><a aria-hidden="true" tabindex="-1" href="#sassloader"><span class="icon icon-link"></span></a>sassLoader<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>配置 sass-loader ，详见 <!-- --><a href="https://github.com/webpack-contrib/sass-loader#options">sass-loader &gt; options</a></p><h2 id="styleloader"><a aria-hidden="true" tabindex="-1" href="#styleloader"><span class="icon icon-link"></span></a>styleLoader<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>启用 style loader 功能，让 CSS 内联在 JS 中，不输出额外的 CSS 文件。</p><h2 id="stylusloader"><a aria-hidden="true" tabindex="-1" href="#stylusloader"><span class="icon icon-link"></span></a>stylusLoader<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>配置 stylus-loader ，详见 <!-- --><a href="https://github.com/webpack-contrib/stylus-loader#options">stylus-loader &gt; options</a></p><h2 id="styles"><a aria-hidden="true" tabindex="-1" href="#styles"><span class="icon icon-link"></span></a>styles<!-- --></h2><ul><li>类型：<!-- --><code>string[]</code></li><li>默认值：<!-- --><code>[]</code></li></ul><p>配置额外的 CSS。</p><p>配置项支持内联样 式和外联样式路径，后者通过是否以 https?:// 开头来判断。</p><p>插入的样式会前置，优先级低于项目内用户编写样式。</p><p>比如：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">styles</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">body { color: red; }</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">https://a.com/b.css</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">]</span><span class="token punctuation">,</span></div></div></pre></div><p>会生成以下 HTML，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-html"><div class=""><div class=""><span class="token tag punctuation">&lt;</span><span class="token tag">style</span><span class="token tag punctuation">&gt;</span><span class="token style language-css"></span></div></div><div class=""><div class=""><span class="token style language-css">  </span><span class="token style language-css selector">body</span><span class="token style language-css"> </span><span class="token style language-css punctuation">{</span><span class="token style language-css"></span></div></div><div class=""><div class=""><span class="token style language-css">    </span><span class="token style language-css property">color</span><span class="token style language-css punctuation">:</span><span class="token style language-css"> </span><span class="token style language-css color">red</span><span class="token style language-css punctuation">;</span><span class="token style language-css"></span></div></div><div class=""><div class=""><span class="token style language-css">  </span><span class="token style language-css punctuation">}</span><span class="token style language-css"></span></div></div><div class=""><div class=""><span class="token style language-css"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">style</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">link</span><span class="token tag"> </span><span class="token tag attr-name">rel</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">stylesheet</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag attr-name">href</span><span class="token tag attr-value punctuation attr-equals">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">https://a.com/b.css</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag"> </span><span class="token tag punctuation">/&gt;</span></div></div></pre></div><h2 id="srctranspiler"><a aria-hidden="true" tabindex="-1" href="#srctranspiler"><span class="icon icon-link"></span></a>srcTranspiler<!-- --></h2><ul><li>类型：<!-- --><code>string</code> 可选的值：<!-- --><code>babel</code>, <!-- --><code>swc</code>, <!-- --><code>esbuild</code></li><li>默认值：<!-- --><code>babel</code></li></ul><p>配置构建时转译 js/ts 的工具。</p><h2 id="srctranspileroptions"><a aria-hidden="true" tabindex="-1" href="#srctranspileroptions"><span class="icon icon-link"></span></a>srcTranspilerOptions<!-- --></h2><ul><li>类型：<!-- --><code>{ swc?: SwcConfig, esbuild?: EsbuildConfig }</code></li><li>默认值：<!-- --><code>undefined</code></li></ul><p>如果你使用了 <!-- --><code>swc</code> / <!-- --><code>esbuild</code> 作为 <!-- --><code>srcTranspiler</code> 转译器，你可以通过此选项对转译器做进一步的配置，详见 <!-- --><a href="https://swc.rs/docs/configuration/swcrc">SwcConfig</a> 、 <!-- --><a href="https://esbuild.github.io/api/#transform-api">EsbuildConfig</a> 配置文档。<!-- --></p><p>如给 swc 添加其他的插件：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token plain">srcTranspilerOptions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  swc</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    jsc</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">      experimental</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">        plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">          </span><span class="token punctuation">[</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">            </span><span class="token string">&#x27;@swc/plugin-styled-components&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">            </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">              displayName</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">              ssr</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">            </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">          </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">        </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="svgr"><a aria-hidden="true" tabindex="-1" href="#svgr"><span class="icon icon-link"></span></a>svgr<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>svgr 默认开启，支持如下方式使用 React svg 组件：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-ts"><div class=""><div class=""><span class="token keyword">import</span><span class="token plain"> SmileUrl</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> ReactComponent </span><span class="token keyword">as</span><span class="token plain"> SvgSmile </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">from</span><span class="token plain"> </span><span class="token string">&#x27;./smile.svg&#x27;</span><span class="token punctuation">;</span></div></div></pre></div><p>可配置 svgr 的行为，配置项详见 <!-- --><a href="https://github.com/gregberge/svgr/blob/main/packages/core/src/config.ts#L9">@svgr/core &gt; Config</a>。<!-- --></p><h2 id="svgo"><a aria-hidden="true" tabindex="-1" href="#svgo"><span class="icon icon-link"></span></a>svgo<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>默认使用 svgo 来优化 svg 资源，配置项详见 <!-- --><a href="https://github.com/svg/svgo#configuration">svgo</a> 。<!-- --></p><h2 id="targets"><a aria-hidden="true" tabindex="-1" href="#targets"><span class="icon icon-link"></span></a>targets<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{ chrome: 80 }</code></li></ul><p>配置需要兼容的浏览器最低版本。Umi 会根据这个自定引入 polyfill、配置 autoprefixer 和做语法转换等。</p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// 兼容 ie11</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">targets</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">ie</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">11</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="theme"><a aria-hidden="true" tabindex="-1" href="#theme"><span class="icon icon-link"></span></a>theme<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>配置 less 变量主题。</p><p>示例：</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token literal-property property">theme</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token string-property property">&#x27;@primary-color&#x27;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;#1DA57A&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span></div></div></pre></div><h2 id="title"><a aria-hidden="true" tabindex="-1" href="#title"><span class="icon icon-link"></span></a>title<!-- --></h2><ul><li>类型：<!-- --><code>string</code></li><li>默认值：<!-- --><code>null</code></li></ul><p>配置全局页面 title，暂时只支持静态的 Title。</p><h2 id="verifycommit"><a aria-hidden="true" tabindex="-1" href="#verifycommit"><span class="icon icon-link"></span></a>verifyCommit<!-- --></h2><ul><li>类型：<!-- --><code>{ scope: string[]; allowEmoji: boolean }</code></li><li>默认值：<!-- --><code>{ scope: [&#x27;feat&#x27;, &#x27;fix&#x27;, &#x27;docs&#x27;, &#x27;style&#x27;, &#x27;refactor&#x27;, &#x27;perf&#x27;, &#x27;test&#x27;, &#x27;workflow&#x27;, &#x27;build&#x27;, &#x27;ci&#x27;, &#x27;chore&#x27;, &#x27;types&#x27;, &#x27;wip&#x27;, &#x27;release&#x27;, &#x27;dep&#x27;, &#x27;deps&#x27;, &#x27;example&#x27;, &#x27;examples&#x27;, &#x27;merge&#x27;, &#x27;revert&#x27;] }</code></li></ul><p>针对 verify-commit 命令的配置项。</p><p>关于参数。<!-- --><code>scope</code> 用于配置允许的 scope，不区分大小写，配置后会覆盖默认的；<!-- --><code>allowEmoji</code> 开启后会允许加 EMOJI 前缀，比如 <!-- --><code>💥 feat(模块): 添加了个很棒的功能</code>。<!-- --></p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-undefined"><div class=""><div class=""><span class="token plain">verifyCommit: {</span></div></div><div class=""><div class=""><span class="token plain">  scope: [&#x27;feat&#x27;, &#x27;fix&#x27;],</span></div></div><div class=""><div class=""><span class="token plain">  allowEmoji: true,</span></div></div><div class=""><div class=""><span class="token plain">}</span></div></div></pre></div><p>注意：使用 <!-- --><code>git revert</code> 或 <!-- --><code>git merge</code> 命令以及 <!-- --><code>changesets</code> 的发版 merge 格式所产生的 commit message 会默认通过校验。<!-- --></p><h2 id="vite"><a aria-hidden="true" tabindex="-1" href="#vite"><span class="icon icon-link"></span></a>vite<!-- --></h2><ul><li>类型：<!-- --><code>object</code></li><li>默认值：<!-- --><code>{}</code></li></ul><p>开发者的配置会 merge 到 vite 的 <!-- --><a href="https://vitejs.dev/config/">默认配置</a>。<!-- --></p><p>示例，</p><div class="dumi-default-source-code"><button type="button" class="dumi-default-source-code-copy"><svg viewBox="64 64 896 896"><path d="M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2 263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"></path></svg></button><pre class="prism-code language-js"><div class=""><div class=""><span class="token comment">// 更改临时文件路径到 node_modules/.bin/.vite 文件夹</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token literal-property property">vite</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain">  </span><span class="token literal-property property">cacheDir</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;node_modules/.bin/.vite&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div></div><div class=""><div class=""><span class="token plain"></span><span class="token punctuation">}</span></div></div></pre></div><h2 id="writetodisk"><a aria-hidden="true" tabindex="-1" href="#writetodisk"><span class="icon icon-link"></span></a>writeToDisk<!-- --></h2><ul><li>类型：<!-- --><code>boolean</code></li><li>默认值：<!-- --><code>false</code></li></ul><p>开启后会在 dev 模式下额外输出一份文件到 dist 目录，通常用于 chrome 插件、electron 应用、sketch 插件等开发场景。</p></div></div><script>$RC("B:2","S:2")</script>