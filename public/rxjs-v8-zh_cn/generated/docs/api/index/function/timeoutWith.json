{
  "id": "api/index/function/timeoutWith",
  "title": "timeoutWith",
  "contents": "\n\n<article>\n  <div class=\"page-actions\">\n    <a href=\"https://github.com/reactivex/rxjs/edit/master/src/internal/operators/timeoutWith.ts?message=docs(index)%3A%20describe%20your%20change...#L12-L116\" aria-label=\"编辑建议\" title=\"编辑建议\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n    <a href=\"https://github.com/reactivex/rxjs/tree/8.0.0-alpha.7/src/internal/operators/timeoutWith.ts#L12-L116\" aria-label=\"查看源码\" title=\"查看源码\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">code</i></a>\n  </div>\n    <div class=\"breadcrumb\">\n      <script type=\"application/ld+json\">\n        {\n          \"@context\": \"http://schema.org\",\n          \"@type\": \"BreadcrumbList\",\n          \"itemListElement\": [\n          { \"@type\": \"ListItem\", \"position\": 1, \"item\": { \"@id\": \"https://angular.io//api\", \"name\": \"API\" } },\n          { \"@type\": \"ListItem\", \"position\": 2, \"item\": { \"@id\": \"https://angular.io/api/index\", \"name\": \"rxjs/index\" } },\n          { \"@type\": \"ListItem\", \"position\": 3, \"item\": { \"@id\": \"https://angular.io/api/index/function/timeoutWith\", \"name\": \"timeoutWith\" } }\n          ]\n        }\n      </script>\n      <a href=\"/api\">API</a> / <a href=\"api/index\">rxjs/index</a>\n    </div>\n  <header class=\"api-header\">\n    <h1 id=\"timeoutwith\">timeoutWith<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/timeoutWith#timeoutwith\"><i class=\"material-icons\">link</i></a></h1>\n    <label class=\"api-type-label function\">function</label>\n    <label class=\"api-status-label deprecated\">已弃用</label>\n    \n    \n    \n    <label class=\"api-status-label operator\">操作符</label>\n  </header>\n  <aio-toc class=\"embedded\"></aio-toc>\n\n  <div class=\"api-body\">\n    \n  \n\n  <p class=\"short-description\"></p><p>When the passed timespan elapses before the source emits any given value, it will unsubscribe from the source,\nand switch the subscription to another observable.</p>\n<p><span class=\"informal\">Used to switch to a different observable if your source is being slow.</span></p>\n<p>Useful in cases where:</p>\n<ul>\n<li>You want to switch to a different source that may be faster.</li>\n<li>You want to notify a user that the data stream is slow.</li>\n<li>You want to emit a custom error rather than the <a href=\"api/index/interface/TimeoutError\"><code>TimeoutError</code></a> emitted\nby the default usage of <a href=\"api/index/function/timeout\"><code>timeout</code></a>.</li>\n</ul>\n<p>If the first parameter is passed as Date and the time of the Date arrives before the first value arrives from the source,\nit will unsubscribe from the source and switch the subscription to another observable.</p>\n<p><span class=\"informal\">Use Date object to switch to a different observable if the first value doesn't arrive by a specific time.</span></p>\n<p>Can be used to set a timeout only for the first value, however it's recommended to use the <a href=\"api/index/function/timeout\"><code>timeout</code></a> operator with\nthe <code><a href=\"api/index/function/first\" class=\"code-anchor\">first</a></code> configuration to get the same effect.</p>\n<h2 id=\"examples\">Examples<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/timeoutWith#examples\"><i class=\"material-icons\">link</i></a></h2>\n<p>Fallback to a faster observable</p>\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>, <a href=\"api/index/function/timeoutWith\" class=\"code-anchor\">timeoutWith</a> } from 'rxjs';\n\nconst slow$ = <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>(1000);\nconst faster$ = <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>(500);\n\nslow$\n  .pipe(<a href=\"api/index/function/timeoutWith\" class=\"code-anchor\">timeoutWith</a>(900, faster$))\n  .subscribe(console.log);\n</code-example>\n<p>Emit your own custom timeout error</p>\n<code-example language=\"ts\">\nimport { <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>, <a href=\"api/index/function/timeoutWith\" class=\"code-anchor\">timeoutWith</a>, <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a> } from 'rxjs';\n\nclass CustomTimeoutError extends Error {\n  constructor() {\n    super('It was too slow');\n    this.name = 'CustomTimeoutError';\n  }\n}\n\nconst slow$ = <a href=\"api/index/function/interval\" class=\"code-anchor\">interval</a>(1000);\n\nslow$\n  .pipe(<a href=\"api/index/function/timeoutWith\" class=\"code-anchor\">timeoutWith</a>(900, <a href=\"api/index/function/throwError\" class=\"code-anchor\">throwError</a>(() => new CustomTimeoutError())))\n  .subscribe({\n    error: err => console.error(err.message)\n  });\n</code-example>\n<p></p>\n  \n\n  \n<section class=\"deprecated\">\n  <h2 id=\"deprecation-notes\">弃用说明<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/timeoutWith#deprecation-notes\"><i class=\"material-icons\">link</i></a></h2>\n  <p>Replaced with <a href=\"api/index/function/timeout\"><code>timeout</code></a>. Instead of <code><a href=\"api/index/function/timeoutWith\" class=\"code-anchor\">timeoutWith</a>(100, a$, scheduler)</code>, use <a href=\"api/index/function/timeout\"><code>timeout</code></a> with the configuration\nobject: <code><a href=\"api/index/function/timeout\" class=\"code-anchor\">timeout</a>({ each: 100, with: () => a$, scheduler })</code>. Instead of <code><a href=\"api/index/function/timeoutWith\" class=\"code-anchor\">timeoutWith</a>(someDate, a$, scheduler)</code>, use <a href=\"api/index/function/timeout\"><code>timeout</code></a>\nwith the configuration object: <code><a href=\"api/index/function/timeout\" class=\"code-anchor\">timeout</a>({ <a href=\"api/index/function/first\" class=\"code-anchor\">first</a>: someDate, with: () => a$, scheduler })</code>. Will be removed in v8.</p>\n\n</section>\n\n\n  \n\n  <code-example language=\"ts\" hidecopy=\"true\" class=\"no-box api-heading deprecated-api-item\"> <a href=\"api/index/function/timeoutWith\" class=\"code-anchor\">timeoutWith</a>&#x3C;T, R>(due: number | Date, withObservable: <a href=\"api/index/type-alias/ObservableInput\" class=\"code-anchor\">ObservableInput</a>&#x3C;R>, scheduler?: <a href=\"api/index/interface/SchedulerLike\" class=\"code-anchor\">SchedulerLike</a>): <a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;T, T | R></code-example>\n\n\n\n  <h4 class=\"no-anchor\" id=\"parameters\">参数</h4>\n  <table class=\"is-full-width list-table parameters-table function-overload-parameters\">\n  <tbody>\n  \n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"due\"></a>\n        <code>due</code>\n      </td>\n      <td class=\"param-type\"><code>number | Date</code></td>\n      <td class=\"param-description\">\n      <p>        When passed a number, used as the time (in milliseconds) allowed between each value from the source before timeout\nis triggered. When passed a Date, used as the exact time at which the timeout will be triggered if the first value does not arrive.</p>\n\n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"withObservable\"></a>\n        <code>withObservable</code>\n      </td>\n      <td class=\"param-type\"><code><a href=\"api/index/type-alias/ObservableInput\" class=\"code-anchor\">ObservableInput</a>&#x3C;R></code></td>\n      <td class=\"param-description\">\n              <p>The observable to switch to when timeout occurs.</p>\n        \n      </td>\n    </tr>\n    <tr class=\"function-overload-parameter\">\n      <td class=\"param-name\">\n        <a id=\"scheduler\"></a>\n        <code>scheduler</code>\n      </td>\n      <td class=\"param-type\"><code><a href=\"api/index/interface/SchedulerLike\" class=\"code-anchor\">SchedulerLike</a></code></td>\n      <td class=\"param-description\">\n              <p>可选。默认值为 <code>undefined</code>。</p>\n        <p>The scheduler to use with time-related operations within this operator. Defaults to <a href=\"api/index/const/asyncScheduler\"><code>asyncScheduler</code></a></p>\n        \n      </td>\n    </tr>\n  </tbody>\n</table>\n\n  \n  <h4 class=\"no-anchor\" id=\"返回值\">返回值</h4>\n  <p><code><a href=\"api/index/interface/OperatorFunction\" class=\"code-anchor\">OperatorFunction</a>&#x3C;T, T | R></code>: A function that returns an Observable that mirrors behaviour of the\nsource Observable, unless timeout happens when it starts emitting values\nfrom the <code><a href=\"api/index/type-alias/ObservableInput\" class=\"code-anchor\">ObservableInput</a></code> passed as a second parameter.</p>\n\n  \n\n\n\n\n\n\n\n  \n\n\n\n\n  \n\n  \n<section class=\"see-also\">\n  <h2 id=\"see-also\">参见<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"api/index/function/timeoutWith#see-also\"><i class=\"material-icons\">link</i></a></h2>\n  <ul>\n  \n    <li><a href=\"api/index/function/timeout\"><code>timeout</code></a>\n</li>\n  </ul>\n</section>\n\n\n\n  </div>\n</article>\n\n<!-- links to this doc:\n - api/deprecations\n - api/index\n - api/index/function/timeout\n - api/operators/timeoutWith\n - guide/scheduler\n-->\n<!-- links from this doc:\n - /api\n - api/index\n - api/index/const/asyncScheduler\n - api/index/function/first\n - api/index/function/interval\n - api/index/function/throwError\n - api/index/function/timeout\n - api/index/function/timeoutWith#deprecation-notes\n - api/index/function/timeoutWith#examples\n - api/index/function/timeoutWith#see-also\n - api/index/function/timeoutWith#timeoutwith\n - api/index/interface/OperatorFunction\n - api/index/interface/SchedulerLike\n - api/index/interface/TimeoutError\n - api/index/type-alias/ObservableInput\n - https://github.com/reactivex/rxjs/edit/master/src/internal/operators/timeoutWith.ts?message=docs(index)%3A%20describe%20your%20change...#L12-L116\n - https://github.com/reactivex/rxjs/tree/8.0.0-alpha.7/src/internal/operators/timeoutWith.ts#L12-L116\n-->"
}